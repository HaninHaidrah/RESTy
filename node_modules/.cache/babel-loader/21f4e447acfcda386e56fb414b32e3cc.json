{"ast":null,"code":"import _regeneratorRuntime from\"/home/hanin/projects/courses/RESTy/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hanin/projects/courses/RESTy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/hanin/projects/courses/RESTy/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/hanin/projects/courses/RESTy/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/hanin/projects/courses/RESTy/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useReducer}from\"react\";import\"./app.scss\";import Header from\"./compononts/header\";import Footer from\"./compononts/Footer\";import Form from\"./compononts/Form\";import Results from\"./compononts/Result\";import History from\"./compononts/History\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialhist=[];var reducer2=function reducer2(){var history=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialhist;var action=arguments.length>1?arguments[1]:undefined;var type=action.type,payload=action.payload;switch(type){case\"addToHistory\":history=[].concat(_toConsumableArray(history),[payload]);return history;default:return state;}};var intial={url:\"\",method:\"\",result:\"null\"};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:intial;var action=arguments.length>1?arguments[1]:undefined;var type=action.type,payload=action.payload;switch(type){case\"reqParams\":return _objectSpread(_objectSpread({},state),{},{url:payload.url,method:payload.method,result:payload.result});default:return state;}};// handle payload for reqParams:\nvar params=function params(url,method,result){return{type:\"reqParams\",payload:{url:url,method:method,result:result}};};var historyAdd=function historyAdd(url,method,result){return{type:\"addToHistory\",payload:{url:url,method:method,result:result}};};export default function App(){var _useReducer=useReducer(reducer,intial),_useReducer2=_slicedToArray(_useReducer,2),vars=_useReducer2[0],dispatch=_useReducer2[1];var _useReducer3=useReducer(reducer2,initialhist),_useReducer4=_slicedToArray(_useReducer3,2),history=_useReducer4[0],dispatch2=_useReducer4[1];var callApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestParams,requestBody){var respond;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://get the url and method:\ndispatch(params(requestParams.url,requestParams.method));// to get the results and then save them :\n_context.next=3;return axios.get(requestParams.url);case 3:respond=_context.sent;dispatch(params(requestParams.url,requestParams.method,respond.data));dispatch2(historyAdd(requestParams.url,requestParams.method,respond.data));case 6:case\"end\":return _context.stop();}}},_callee);}));return function callApi(_x,_x2){return _ref.apply(this,arguments);};}();console.log(vars);console.log(history);function historyfunc(url,method,result){dispatch(params(url,method,result));}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"div1\",\"data-testid\":\"url\",children:[\" \",vars.method,\" \",vars.url]}),/*#__PURE__*/_jsx(Form,{handleApiCall:callApi}),history&&/*#__PURE__*/_jsx(History,{historyfunc:historyfunc,history:history}),/*#__PURE__*/_jsx(Results,{data:vars.result}),/*#__PURE__*/_jsx(Footer,{})]})});}","map":{"version":3,"sources":["/home/hanin/projects/courses/RESTy/src/App.js"],"names":["React","useReducer","Header","Footer","Form","Results","History","axios","initialhist","reducer2","history","action","type","payload","state","intial","url","method","result","reducer","params","historyAdd","App","vars","dispatch","dispatch2","callApi","requestParams","requestBody","get","respond","data","console","log","historyfunc"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\nimport \"./app.scss\";\nimport Header from \"./compononts/header\";\nimport Footer from \"./compononts/Footer\";\nimport Form from \"./compononts/Form\";\nimport Results from \"./compononts/Result\";\nimport History from \"./compononts/History\";\nimport axios from \"axios\";\nlet initialhist = [];\n\nlet reducer2 = (history = initialhist, action) => {\n  let { type, payload } = action;\n  switch (type) {\n    case \"addToHistory\":\n      history = [...history, payload];\n      return history;\n    default:\n      return state;\n  }\n};\nconst intial = {\n  url: \"\",\n  method: \"\",\n  result: \"null\",\n};\n\nlet reducer = (state = intial, action) => {\n  let { type, payload } = action;\n  switch (type) {\n    case \"reqParams\":\n      return {\n        ...state,\n        url: payload.url,\n        method: payload.method,\n        result: payload.result,\n      };\n    default:\n      return state;\n  }\n};\n\n// handle payload for reqParams:\nconst params = (url, method, result) => {\n  return {\n    type: \"reqParams\",\n    payload: {\n      url,\n      method,\n      result,\n    },\n  };\n};\nconst historyAdd = (url, method, result) => {\n  return {\n    type: \"addToHistory\",\n    payload: {\n      url,\n      method,\n      result,\n    },\n  };\n};\n\nexport default function App() {\n  const [vars, dispatch] = useReducer(reducer, intial);\n  const [history, dispatch2] = useReducer(reducer2, initialhist);\n\n  const callApi = async (requestParams, requestBody) => {\n    //get the url and method:\n    dispatch(params(requestParams.url, requestParams.method));\n\n    // to get the results and then save them :\n    let respond = await axios.get(requestParams.url);\n    dispatch(params(requestParams.url, requestParams.method, respond.data));\n    dispatch2(\n      historyAdd(requestParams.url, requestParams.method, respond.data)\n    );\n  };\n  console.log(vars);\n  console.log(history);\n\n  function historyfunc(url, method, result) {\n    dispatch(params(url, method, result));\n  }\n  return (\n    <>\n      <React.Fragment>\n        <Header />\n        <div className=\"div1\" data-testid=\"url\">\n          {\" \"}\n          {vars.method} {vars.url}\n        </div>\n\n        <Form handleApiCall={callApi} />\n        {history && <History historyfunc={historyfunc} history={history} />}\n\n        <Results data={vars.result} />\n        <Footer />\n      </React.Fragment>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}